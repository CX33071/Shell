僵尸进程

定义：已经执行完毕退出，但父进程还没有回收它的退出状态和资源的子进程

1.为什么会产生僵尸进程？

父进程通过 `fork()` 创建子进程；

子进程运行完成后调用 `exit()` 退出，此时子进程的**运行实体（内存、CPU 资源）会被释放**，但进程表中的条目（PID、退出状态、资源使用统计等）会保留；

父进程需要通过 `wait()` 或 `waitpid()` 系统调用 “认领” 子进程的退出状态，系统才会彻底删除这个子进程的进程表条目；

如果父进程**没有调用 wait 系列函数**，也没有退出，那么这个子进程就会变成僵尸进程

2.如何避免僵尸进程？

#### 方法 1：主动调用 wait/waitpid（同步回收）

父进程在合适的时机调用 `waitpid()` 回收子进程，比如上面代码中注释掉的部分。

优点：简单；缺点：如果父进程要处理多个子进程，同步 wait 会阻塞父进程。

#### 方法 2：注册 SIGCHLD 信号处理函数（异步回收）

当子进程退出时，内核会给父进程发送 `SIGCHLD` 信号，父进程可以注册信号处理函数，在函数中调用 `waitpid()` 回收所有退出的子进程（非阻塞方式）

总结：

本质：子进程已退出，但父进程未回收其进程表条目，仅占PID资源